schema: '2.0'
stages:
  data_preprocess:
    cmd: python src/data_preprocess.py --params params.yaml
    deps:
    - path: data/external/images
      md5: c48566c030889e71a791e1412d7dddf7.dir
      size: 118179012
      nfiles: 905
    - path: data/external/stats/pokemon-gen-1-8.csv
      md5: b0b029c2dc01bd0e6f2dbf9eeae8c14e
      size: 160616
    - path: src/data_preprocess.py
      md5: 9cb3eb4e9c4d74493a666595a3ba7d97
      size: 3210
    params:
      params.yaml:
        base:
          seed: 42
          pokemon_type_train: Water
        data_preprocess:
          source_directory: data/external
          destination_directory: data/processed
          dataset_labels: stats/pokemon-gen-1-8.csv
          dataset_images: images
    outs:
    - path: data/processed/pokemon
      md5: c48566c030889e71a791e1412d7dddf7.dir
      size: 118179012
      nfiles: 905
    - path: data/processed/pokemon-with-image-paths.csv
      md5: 6eecfe2d1f1e84d98eba11f50a9a8b48
      size: 109528
    - path: data/processed/pokemon.csv
      md5: ddfc4d225790b12fbd9ed8b0d667406c
      size: 47841
  data_load:
    cmd: python src/data_load.py --params params.yaml
    deps:
    - path: data/processed/pokemon
      md5: c48566c030889e71a791e1412d7dddf7.dir
      size: 118179012
      nfiles: 905
    - path: data/processed/pokemon-with-image-paths.csv
      md5: 6eecfe2d1f1e84d98eba11f50a9a8b48
      size: 109528
    - path: src/data_load.py
      md5: 3beae88ab58ae0cb8d355477e04f3574
      size: 2134
    params:
      params.yaml:
        base:
          seed: 42
          pokemon_type_train: Water
        data_preprocess:
          source_directory: data/external
          destination_directory: data/processed
          dataset_labels: stats/pokemon-gen-1-8.csv
          dataset_images: images
    outs:
    - path: data/processed/X.pckl
      md5: 8f6555c6159e27739fd97a61ace395a4
      size: 2891610169
    - path: data/processed/X_test.pckl
      md5: 23c3aa551e6826615b71e592972997a8
      size: 581210168
    - path: data/processed/X_train.pckl
      md5: 364b2c4e8fe73f88a79ef5da6416abac
      size: 2310400169
    - path: data/processed/y.pckl
      md5: f156295a269847ea043fff40f8cca0a7
      size: 7072
    - path: data/processed/y_test.pckl
      md5: 05695e9b10f3c84048b6c6d0af01bd30
      size: 3247
    - path: data/processed/y_train.pckl
      md5: 25b4a8bb684e918396014650bfcfeffd
      size: 10913
  train:
    cmd: python src/train.py --params params.yaml
    deps:
    - path: data/processed/X_test.pckl
      md5: 23c3aa551e6826615b71e592972997a8
      size: 581210168
    - path: data/processed/X_train.pckl
      md5: 364b2c4e8fe73f88a79ef5da6416abac
      size: 2310400169
    - path: data/processed/y_test.pckl
      md5: 05695e9b10f3c84048b6c6d0af01bd30
      size: 3247
    - path: data/processed/y_train.pckl
      md5: 25b4a8bb684e918396014650bfcfeffd
      size: 10913
    - path: src/train.py
      md5: e3f1fe3b75294ccb7043d8fe64222256
      size: 4334
    params:
      params.yaml:
        base:
          seed: 42
          pokemon_type_train: Water
        data_preprocess:
          source_directory: data/external
          destination_directory: data/processed
          dataset_labels: stats/pokemon-gen-1-8.csv
          dataset_images: images
        train:
          test_size: 0.2
          learning_rate: 0.05
          epochs: 3
          batch_size: 120
    outs:
    - path: outputs/model/saved_model.pb
      md5: 86721ac473c9a486fbdc4a8618731cf0
      size: 194321
    - path: outputs/train_history.png
      md5: 62b4ab0dfd7a37a94d0ee4e05b7846b2
      size: 35761
  evaluate:
    cmd: python src/evaluate.py --params params.yaml
    deps:
    - path: outputs/model/keras_metadata.pb
      md5: deedfd296f79a4cd7e3ed78450e75376
      size: 17309
    - path: outputs/model/saved_model.pb
      md5: 86721ac473c9a486fbdc4a8618731cf0
      size: 194321
    - path: outputs/train_history.png
      md5: 62b4ab0dfd7a37a94d0ee4e05b7846b2
      size: 35761
    params:
      params.yaml:
        base:
          seed: 42
          pokemon_type_train: Water
    outs:
    - path: outputs/confusion_matrix.png
      md5: 72d996c4c48c410dfd021a3c82458c90
      size: 22341
    - path: outputs/metrics.yaml
      md5: c54e32e85ebb875e1903d1c0bdb3caf2
      size: 95
