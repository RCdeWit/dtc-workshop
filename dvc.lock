schema: '2.0'
stages:
  data_preprocess:
    cmd: python3 src/data_preprocess.py --params params.yaml
    deps:
    - path: data/external/images
      md5: c48566c030889e71a791e1412d7dddf7.dir
      size: 118179012
      nfiles: 905
    - path: data/external/stats/pokemon-gen-1-8.csv
      md5: b0b029c2dc01bd0e6f2dbf9eeae8c14e
      size: 160616
    - path: src/data_preprocess.py
      md5: ca6da5394d49caffdf0eebffcfedc0c6
      size: 3065
    params:
      params.yaml:
        base:
          seed: 42
          pokemon_type_train: Fire
        data_preprocess:
          source_directory: data/external
          destination_directory: data/processed
          dataset_labels: stats/pokemon-gen-1-8.csv
          dataset_images: images
    outs:
    - path: data/processed/pokemon
      md5: c48566c030889e71a791e1412d7dddf7.dir
      size: 118179012
      nfiles: 905
    - path: data/processed/pokemon-with-image-paths.csv
      md5: 60601a7128d9f10890ee0a6a4e555c48
      size: 103119
    - path: data/processed/pokemon.csv
      md5: ddfc4d225790b12fbd9ed8b0d667406c
      size: 47039
  data_load:
    cmd: python3 src/data_load.py --params params.yaml
    deps:
    - path: data/processed/pokemon
      md5: c48566c030889e71a791e1412d7dddf7.dir
      size: 118179012
      nfiles: 905
    - path: data/processed/pokemon-with-image-paths.csv
      md5: 60601a7128d9f10890ee0a6a4e555c48
      size: 103119
    - path: src/data_load.py
      md5: 3beae88ab58ae0cb8d355477e04f3574
      size: 2073
    params:
      params.yaml:
        base:
          seed: 42
          pokemon_type_train: Fire
        data_preprocess:
          source_directory: data/external
          destination_directory: data/processed
          dataset_labels: stats/pokemon-gen-1-8.csv
          dataset_images: images
    outs:
    - path: data/processed/X.pckl
      md5: 8f6555c6159e27739fd97a61ace395a4
      size: 2891610169
    - path: data/processed/X_test.pckl
      md5: e5e4f1c3a0454ff8ad5c46bbe6fc486a
      size: 581210168
    - path: data/processed/X_train.pckl
      md5: e88c578e854382d2f9bbf9af87cc6fd3
      size: 2310400169
    - path: data/processed/y.pckl
      md5: 4ec8aec8c14b5896c15aed20b46f9e4b
      size: 7071
    - path: data/processed/y_test.pckl
      md5: ee33f9eca5e99bde0c6e8196ddfac787
      size: 3246
    - path: data/processed/y_train.pckl
      md5: 1d104a68abc723d955ece9ed1c3de3a7
      size: 10912
  train:
    cmd: python3 src/train.py --params params.yaml
    deps:
    - path: data/processed/X_test.pckl
      md5: e5e4f1c3a0454ff8ad5c46bbe6fc486a
      size: 581210168
    - path: data/processed/X_train.pckl
      md5: e88c578e854382d2f9bbf9af87cc6fd3
      size: 2310400169
    - path: data/processed/y_test.pckl
      md5: ee33f9eca5e99bde0c6e8196ddfac787
      size: 3246
    - path: data/processed/y_train.pckl
      md5: 1d104a68abc723d955ece9ed1c3de3a7
      size: 10912
    - path: src/train.py
      md5: e3f1fe3b75294ccb7043d8fe64222256
      size: 4217
    params:
      params.yaml:
        base:
          seed: 42
          pokemon_type_train: Fire
        data_preprocess:
          source_directory: data/external
          destination_directory: data/processed
          dataset_labels: stats/pokemon-gen-1-8.csv
          dataset_images: images
        train:
          test_size: 0.2
          learning_rate: 0.001
          epochs: 15
          batch_size: 120
    outs:
    - path: outputs/model/saved_model.pb
      md5: 27e7f50d753c709a43174465c5a40159
      size: 194467
    - path: outputs/train_history.png
      md5: 8dc6ce73890679d71bdb587acdafbacc
      size: 54662
  evaluate:
    cmd: python3 src/evaluate.py --params params.yaml
    deps:
    - path: outputs/model/keras_metadata.pb
      md5: c7f12fbd11650bd6ea7c3fdd7b53e8f4
      size: 17311
    - path: outputs/model/saved_model.pb
      md5: 27e7f50d753c709a43174465c5a40159
      size: 194467
    - path: outputs/train_history.png
      md5: 8dc6ce73890679d71bdb587acdafbacc
      size: 54662
    params:
      params.yaml:
        base:
          seed: 42
          pokemon_type_train: Fire
    outs:
    - path: outputs/confusion_matrix.png
      md5: ac21f4e7f10cf463de95e47c4d577f86
      size: 23087
    - path: outputs/metrics.yaml
      md5: c1d3b4e223c97dccc21ccf7674110baa
      size: 91
